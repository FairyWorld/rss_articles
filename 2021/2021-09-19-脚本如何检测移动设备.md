# 脚本如何检测移动设备

https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser

## navigator.userAgent

if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
 // some code..
}

if (/Mobi|Android/i.test(navigator.userAgent)) {
    // mobile!
}

$.browser.device = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));

if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ||
   (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.platform))) {
    // some code...
}

```javascript
function detectMob() {
    const toMatch = [
        /Android/i,
        /webOS/i,
        /iPhone/i,
        /iPad/i,
        /iPod/i,
        /BlackBerry/i,
        /Windows Phone/i
    ];
    
    return toMatch.some((toMatchItem) => {
        return navigator.userAgent.match(toMatchItem);
    });
}
```

## navigator.userAgentData

const isMobile = navigator.userAgentData.mobile; //resolves true/false

支持情况 https://caniuse.com/mdn-api_navigator_useragentdata

## screen 宽度

if(screen.width < 500 ||
 navigator.userAgent.match(/Android/i) ||
 navigator.userAgent.match(/webOS/i) ||
 navigator.userAgent.match(/iPhone/i) ||
 navigator.userAgent.match(/iPod/i)) {
alert("This is a mobile device");
}

如果手机横屏使用，screen.width 可能很大。

var getBrowserWidth = function(){
    if(window.innerWidth < 768){
        // Extra Small Device
        return "xs";
    } else if(window.innerWidth < 991){
        // Small Device
        return "sm"
    } else if(window.innerWidth < 1199){
        // Medium Device
        return "md"
    } else {
        // Large Device
        return "lg"
    }
};
现在我们已经设置了函数，我们可以调用它并存储值：

var device = getBrowserWidth();


## window.orientation

if (typeof window.orientation !== 'undefined') { ... }

移动设备浏览器支持这个属性，桌面电脑不支持。

## touch 事件检测

function isMobile() { return ('ontouchstart' in document.documentElement); }

但是，没有排除触摸屏电脑。

function isMobile() {
  // 桌面设备会报错
  try{ document.createEvent("TouchEvent"); return true; }
  catch(e){ return false; }
}

## MediaQuery 方法

```javascript
$(function() {      
    let isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;

    if (isMobile) {
        //Conditional script here
    }
 });
```

isMobile = function(){
    var isMobile = window.matchMedia("only screen and (max-width: 760px)");
    return isMobile.matches ? true : false
}

function isMobile() {
    var match = window.matchMedia || window.msMatchMedia;
    if(match) {
        var mq = match("(pointer:coarse)");
        return mq.matches;
    }
    return false;
}

 !matchMedia("(any-pointer:fine)").matches

## 工具

react-device-detect https://www.npmjs.com/package/react-device-detect
