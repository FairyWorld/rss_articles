# 微信小程序入门教程

微信是国内装机量最大的手机 App 之一，日活跃用户超过3亿，月活跃用户超过11亿（2019年底[数据](http://www.xinhuanet.com/info/2020-01/10/c_138692663.htm)），有着极大的市场。

微信小程序（以下简称“小程序”）是微信的一种扩展手段，允许外部开发者在微信平台上，运行自己的代码，开展业务。自从2017年初发布以来，发展势头非常迅猛，到2020年6月已经超过了[550万个](https://www.sohu.com/a/414519022_116132)。

各种各样的公司，都希望开发自己的小程序，导致小程序开发者的招聘需求极其旺盛，远大于市场的供给。只要会写小程序，就容易找工作。

但是，小程序的开发教程却很缺，要么是不够系统，要么就是跳跃性太大，很多关键的地方寥寥数语，初学者摸不着头脑。我自己学的时候，就苦于找不到的好一点的教程。

本文就是我的小程序学习笔记，整理成教程的形式，希望对于初学者有用。在不长的篇幅中，几个主要的方面，我都会讲到，目标是读完这个教程，大家就能学会怎么写小程序。

考虑到很多同学并没有开发经验，小程序是他们接触的第一个开发领域。我会讲得比较细，希望新人也能没有困难地阅读这个教程。

## 一、小程序是什么？

学习小程序之前，有必要理解它到底是一个什么东西。

字面上讲，小程序就是微信里面的应用程序，但是实际上可以说， **小程序就是只能用微信打开和浏览的网站。**

小程序的实现参考了网页模型，基本上是将网页技术移植到微信，JavaScript 语言和 CSS 样式都是照搬的，所以说跟网站很像。

但是，小程序的运行环境，完全脱离了浏览器。（1）页面代码不使用 HTML 语言，改用 WXML（微信标记语言）；（2）浏览器 API 全部改成了微信 API，所以小程序只能在微信运行，因为底层全变了。

## 二、小程序的优势

由于小程序可以使用微信 API，所以微信 App 具有的功能（比如拍照、扫描、付款等等），小程序大部分都能使用。

这也是小程序吸引人的地方，各种系统功能，微信都已经帮你封装好了，开发者不用自己实现，也不用考虑 iOS 和安卓的平台差异，往往只要一行代码就可以调用。明明只是一个简单的脚本，用户却有手机原生 App 的体验。

而且，用户的注册和登录，开发者都不需要考虑，直接使用微信的注册和登录。微信的用户自动成为你的用户。

## 三、知识准备

小程序的开发，需要有一些知识准备。由于它模仿了网页模型，所以最好具备网页开发的知识，再来学习小程序。

具体来说，下面两方面的知识是必需的。

（1）JavaScript 语言：理解基本语法，会写简单的 JS 脚本程序。

（2）CSS 样式：理解如何使用 CSS 控制网页元素的外观。

由于小程序脱离了浏览器，所以 HTML 语言和浏览器 API 不是必备知识，但是了解浏览器怎么渲染网页，对于理解小程序模型有很大的帮助。

## 四、开发准备

## 程序结构

一个描述整体程序的 app 和多个描述各自页面的 page。

一个小程序主体部分由三个文件组成，必须放在项目的根目录

- app.js	必需	小程序逻辑
- app.json	必需	小程序公共配置，全局配置。
- app.wxss	非必需	小程序公共样式表，全局样式文件，非必需。

一个小程序页面由四个文件组成，

- js	必需	页面逻辑
- wxml	必需	页面结构
- json	非必需	页面配置
- wxss	非必需	页面样式表

上述四个文件必需具有相同的路径与文件名。

## 小程序内核

网页开发渲染线程和脚本线程是互斥的，这也是为什么长时间的脚本运行可能会导致页面失去响应，而在小程序中，二者是分开的，分别运行在不同的线程中。网页开发者可以使用到各种浏览器暴露出来的 DOM API，进行 DOM 选中和操作。而如上文所述，小程序的逻辑层和渲染层是分开的，逻辑层运行在 JSCore 中，并没有一个完整浏览器对象，因而缺少相关的DOM API和BOM API。这一区别导致了前端开发非常熟悉的一些库，例如 jQuery、 Zepto 等，在小程序中是无法运行的。同时 JSCore 的环境同 NodeJS 环境也是不尽相同，所以一些 NPM 的包在小程序中也是无法运行的。

运行环境	逻辑层	渲染层
iOS	JavaScriptCore	WKWebView
安卓	X5 JSCore	X5浏览器
小程序开发者工具	NWJS	Chrome WebView

## 开发流程

申请 AppID

浏览器打开 https://mp.weixin.qq.com/ 点击立即注册，如图1-1所示，在打开的页面中选择小程序后，填入相关的信息，就可以完成注册了。

基本视图组件中的view相当于HTML中的div可用来布局；

基本内容组件中的text相当于span，可以用来装载多段行内文本，

再如媒体组件中的image，它相当于img标签用来承载图片信息。

## Hello World 

app.json app.js

```javascript
App({
  onLaunch: function () {
    console.log('App Launch')
  },
  onShow: function () {
    console.log('App Show')
  },
  onHide: function () {
    console.log('App Hide')
  }
})
```


