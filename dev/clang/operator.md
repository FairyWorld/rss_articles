# 运算符

C 语言的运算符非常多，一共有 50 多种。

## 算术运算符

- `+`：一元的正值运算符
- `-`：一元的负值运算符
- `+`：加法运算符
- `-`：减法运算符
- `*`：乘法运算符
- `/`：除法运算符
- `%`：余值运算符

两个整数的除法，是整除，会得到一个整数，比如`6 / 4`的结果是`1`，而不是`1.5`。只要除法的运算数有一个是浮点数，就会得到浮点值，比如`6 / 4.0`。


```c
i = i + 3;  // addition (+) and assignment (=) operators, add 3 to i
i = i - 8;  // subtraction, subtract 8 from i
i = i * 9;  // multiplication
i = i / 2;  // division
i = i % 5;  // modulo (division remainder)
```

上面这些运算符，有简洁写法。

```c
i += 3;  // Same as "i = i + 3", add 3 to i
i -= 8;  // Same as "i = i - 8"
i *= 9;  // Same as "i = i * 9"
i /= 2;  // Same as "i = i / 2"
i %= 5;  // Same as "i = i % 5"
```

- `=` 赋值运算符
- `+=` 加法赋值运算符
- `-=` 减法赋值运算符
- `*=` 乘法赋值运算符
- `/=` 除法赋值运算符
- `%=` 余值赋值运算符

## 自增运算符，自减运算符

- `++`：自增运算符
- `--`：自减运算符

```c
i++; // 等同于 i += 1
i--; // 等同于 i -= 1
```

这两个运算符放在变量的前面或后面，结果是不一样的。执行自增运算后，`var++`返回自增后的值，`++var`返回自增前的值；执行自减运算后，`var--`返回自减后的值， `--var`返回自减前的值。

```c
int i = 42;
int j;

j = (i++ + 10);
// i is now 43
// j is now 52 (NOT 53)

j = (++i + 10)
// i is now 44
// j is now 54
```

上面的写法很容易出现意料之外的结果，为了消除意外，可以改用下面的写法。

```c
/* 写法一 */
j = (i + 10);
i++;

/* 写法二 */
i++;
j = (i + 10);
```

## 判断运算符

- `>` 大于运算符
- `<` 小于运算符
- `>=` 大于等于运算符
- `<=` 小于等于运算符
- `==` 等于运算符
- `!=` 不等于运算符

```c
a == b;  // True if a is equivalent to b
a != b;  // True if a is not equivalent to b
a < b;   // True if a is less than b
a > b;   // True if a is greater than b
a <= b;  // True if a is less than or equal to b
a >= b;  // True if a is greater than or equal to b
```

```c
if (x == 3) ...
```

注意，等号`=`不是比较运算符，不要跟`==`混淆。有时候，不小心会写出下面的代码，它可以运行，但很容易出现意料之外的结果。

```c
if (x = 3) ...
```

为了防止出现这种错误，有的程序员喜欢将变量写在等号的右边。

```c
if (3 == x) ...
```

这样的话，如果把`==`误写成`=`，编译器就会报错。

```c
/* 报错 */
if (3 = x) ...
```

逻辑表达式返回`0`或`1`，表示真假。C 语言中，`0`表示假，`1`表示真。比如，`20 > 12`返回`1`，`12 > 20`返回`0`。

## 逻辑运算符

- `!` 否运算符
- `&&` 与运算符
- `||` 或运算符

```c
if (x < 10 && y > 20)
  printf("Doing something!\n");
```

下面是否运算符的例子。

```c
if (!(x < 12))
  printf("x is not less than 12\n");
```

上面示例中，由于否运算符`!`具有比`<`更高的优先级，所以必须使用括号。

对于逻辑运算符来说，任何非零值都是真值，任何零值都是假值。比如，`5 || 0`会返回`1`，`5 && 0`会返回`0`。

位运算符

- `~` 位的否运算，将 0 变为 1 或者 1 变为 0。
- `&` 位的与运算（and）。
- `|` 位的或运算（or）。
- `^` 位的异或运算（exclusive or）。
- `>>` 位的右移运算（right shift，除以 2 的乘方)。
- `<<` 位的左移运算（left shift，乘以 2 的乘方)。

注意，不要把位运算符`&`和`|`，跟逻辑运算符`&&`和`||`混淆。

位运算符的优先级很高，比布尔运算符更高。

赋值运算符的简写。

`x += 2`等于`x = x + 2`。

- `+=`, `-=` 加法赋值、减法赋值。
- `*=`, `/=` 乘法赋值、除法赋值。
- `%=` 整除赋值。
- `>>=` 右移运算赋值。
- `<<=` Bitwise left shift RHS (multiply by power of 2)
- `&=`, `|=`, `^=` Bitwise and, or, xor by RHS

## 逗号运算符

逗号运算符用于将多个表达式写在一起，从左到右依次运行每个表达式。

```c
x = 10, y = 20;
```

逗号运算符返回最后一个表达式的值，作为整个语句的值。

```c
x = 1, 2, 3;
```

## 运算优先级

复杂的表达式尽量使用圆括号，避免搞错优先级。
