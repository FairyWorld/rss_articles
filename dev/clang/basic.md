# C 语言简介

## 历史

C 语言是 AT&T 公司贝尔实验室的科学家 Kernighan 和 Ritchie，在开发 Unix 操作系统的过程中发明的。他们的著作《C Programming Language》总结了这门语言的基本语法。

## C 语言的编程哲学

C 语言假设程序员知道自己在干嘛，所以语言层面的限制很少，你可以用它直接操作计算机底层，干什么都可以，后果也由自己负责。一个典型的例子就是，它假设程序员会自己管理内存，所以不提供内存自动清理功能，程序员必须手动管理内存。另外，C 语言也不提供类型检查、数组的负索引检查、指针位置的检查。这些特点使得 C 语言的 debug 并不容易。

语法上，C 语言是一门“简单的”语言，包含的语法特性并不太多，也几乎没有语法糖。如果两个语法可以完成几乎相同的事情，C 语言就只提供一种语法。C 语言的语法都是基础语法，不提供高级语法，比如高级数据结构都需要自己构造，也没有“类”（class）这种东西。

所有这些特点，使得 C 语言的运行速度很快，但是也容易出错。不过从另一个角度看，C 语言的编译器实现起来，难度相对较低。

## 最简单的示例

下面是一个简单的 C 程序`hello.c`。

```c
# include <stdio.h>

int main(void) {
  printf("Hello World\n");
  return 0;
}
```

第一行是预处理信息，`#`表示是预处理指令，这里表示标准库`stdio.h`。注意，指令的尾部不需要分号表示结束。

第三行是主函数`main`，所有 C 程序都是从`main`开始运行，即自动调用`main`。这里的`main`函数返回整数`int`，参数是`void`，即无参数。

第四行是`printf`函数，用来将参数显示在屏幕上。注意，正常语句要用分号表示结束，这是因为正常语句可以写成多行，不用分号很难确定结束位置。而预处理指令都是一行的。

第五行是函数的返回值`0`，表示运行成功。如果运行失败，一般约定返回非零值。

然后，将这个源文件编译成可以运行的程序。

```bash
$ gcc hello.c
```

上面代码使用`gcc`编译器，将源文件`hello.c`编译成二进制代码。编译产物默认叫做`a.out`。执行这个文件，会输出`Hello World`。

```bash
$ ./a.out
Hello World
```

`-o`参数可以指定编译产物的文件名。

```bash
$ gcc -o hello hello.c
```

上面代码的编译产物就是`hello`。

```bash
$ ./hello
Hello World
```

## 注释

C 语言的注释用`/* .. comments .. */`表示，注释内部可以分行。

```c
/* comments */

/*
  This is a comment.
*/
```

C99 还支持双斜杠的`//`的单行注释。

```c
// This is a comment.
// This is another comment.
```

## 变量

变量名可以包括字母、数字和下划线，但是不能以数字开头。

声明变量的时候，需要提供类型。

```c
int num;
num = 42;
```

可以一次声明多个变量。

```c
float x, y, z, X;
```

注意，变量声明的时候，不会清空分配的内存，因此可能会得到任何值。

## 赋值运算符

赋值运算符`=`为变量赋值后，返回等号右边的值。

```c
y = (x = 2 * x)
```

上面代码中，变量`x`先是将自己的值倍增，然后返回这个新的值，赋给变量`y`。
