# 指针

## 简介

指针是一个值，这个值代表一个内存地址，因此相当于指向其他内存地址的路标。

字符`*`表示指针，通常跟着类型关键字的后面，表示指针指向的是什么类型的值。比如，`Char*`表示一个指向字符的指针，`struct fraction*`表示一个指向自定义类型`fraction`的指针。

```c
int* intPtr;
```

上面示例声明了一个变量`intPtr`，它是一个指针，指向的内存地址存放的是一个整数。

星号`*`可以放在变量名与类型关键字之间的任何地方，下面的写法都是等价的。

```c
int   *intPtr;
int * intPtr;
int*  intPtr;
```

本教程使用星号紧跟在类型关键字后面的写法。

一个指针指向的可能还是指针，这时就要用两个星号`**`表示。

```c
int** foo;
```

上面示例表示变量`foo`是一个指针，指向的还是一个指针，第二个指针指向的则是一个整数。

下面是指针与`struct`命令结合的一个例子。

```c
struct node {
  int data;
  struct node* next;
};
```

上面示例表示，自定义类型`node`的属性`next`是一个指针，指向的是一个`node`类型的实例。事实上，链表就是这样实现的。

## & 运算符

`&`运算符用来取出一个变量所在的内存地址。

```c
int* p;
int i;

p = &i;
*p = 13;
```

上面示例中，`p`是指针变量，`i`是整数变量。`&i`是`i`的内存地址，`p = &i`就表示`p`指向变量`i`。`*p`表示`p`指向的值，`*p = 13`表示`p`指向的值（即`i`）是`13`。运行上面的语句以后，变量`i`就会等于`13`。

注意，`p = &i`这一步是必需的。如果少了这一步，指针变量`p`没有初始化，可能指向任意一个内存地址。

```c
int* p;
*p = 13;
```

上面示例中，指针变量`p`声明后，并没有初始化，指向的是一个随机的内存地址。直接执行`*p = 13`，会导致随机地址包含的值被改成`13`，可能引发意想不到的错误。

因此要记住，如果对指针变量所指向的内存地址赋值，一定要先对指针变量赋值，使得指针变量指向那个地址，然后再对那个地址赋值。

