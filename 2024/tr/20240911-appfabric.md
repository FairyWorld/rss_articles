
## 什么是 AppFabric

云平台提供大量云服务，构建应用时，我们会在平台上选择自己需要的各种服务。

AppFrabric 是一组你可以选择加入的服务，当前包括访问控制、连接和缓存

Azure AppFabric 是一套中间件服务和技术，可帮助您开发和管理使用 Windows Azure 的服务/应用程序。中间件通常被定义为帮助连接其他软件的软件，这个定义对于 appFabric 提供的服务来说非常准确。

本质上，AppFabric 提供了将复杂应用程序组合为服务时所需的某些资源，而您必须自己实现和维护这些资源。

一个应用程序包含一个或多个服务，每个服务都部署到 Windows Azure 托管的容器（或服务组）中。容器是用于部署 AppFabric 应用程序的可扩展单元。

## 微软 AppFabric

https://azure.microsoft.com/fr-fr/blog/introducing-windows-azure-appfabric-applications/

首先，让我们来定义一下我们所说的 AppFabric 应用程序的含义。简而言之，它是任何跨越 Web、中间层和数据层、与外部服务组合、并且本质上是为云架构编写的 n 层 .NET 应用程序，以实现可扩展性和可用性。

AppFabric 容器服务承担着弹性扩展和使应用程序可用且可靠的繁重任务。

开发人员可以根据他们想要的控制程度来指定规模实例数量、副本数量、分区策略等方面的意图。

服务组合

AppFabric 容器服务是新的多租户中间层容器，用于大规模托管和运行 WCF 和 WF 等中间层代码或您的自定义代码，并且具有高可用性。

AppFabric 容器的核心由一大群机器组成，这些机器已设置为具有弹性、可扩展和多租户，并且已预先配置了运行自定义代码、WCF 服务所需的必要框架和运行时或工作流程。借助 AppFabric Container，我们提高了开发人员和管理员的抽象级别，使他们不必处理底层计算、网络和存储基础设施的任何复杂性。开发人员可以专注于业务逻辑，并让运行时管理分区、复制、状态管理、地址虚拟化、动态地址解析、故障转移、隔离、弹性、负载平衡、请求路由等复杂细节。

您只需使用应用程序管理器或直接从 Visual Studio 将 WCF 服务、工作流或自定义 .NET 代码打包并放入 AppFabric 容器中，然后让容器为您托管、运行和扩展应用程序。然后，您可以坐下来，通过应用程序管理器管理您的服务的服务级别目标。

应用程序管理器是拼图的最后一块。它是基础结构和工具，使您能够管理任何 AppFabric 应用程序的整个生命周期 — 配置、部署、控制、监控、故障排除和扩展，所有这些都作为单个逻辑应用程序进行。

一个跨越 Web 层、中间层和数据层的示例应用程序；该应用程序与 Windows Azure 和外部第三方服务组合在一起，但在应用程序管理器中作为单个单元进行管理。

![](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6254.clip_5F00_image004_5F00_thumb_5F00_2296D4B2.jpg)

（1）应用程序管理器要做的第一件事就是帮助您了解端到端应用程序结构及其内容。然后，它允许您集中配置整个应用程序及其所有部分，包括详细的 WCF 配置设置（例如设置超时和并发连接数）或简单的环境设置（例如在生产与暂存中连接到哪个数据库）。

（2）运行更容易。完成应用程序配置后，只需单击一下即可跨多个 Web 容器和 AppFabric 容器部署整个应用程序。

部署过跨多个层的分布式应用程序的任何人都了解应用程序管理器只需单击一下即可消除的所有痛苦！您再也不需要处理任何虚拟机、网络设置或存储配置。

（3）监控各种指标。所有这些都无需在开发期间编写一行代码！并且这些指标会在您的扩展应用程序的所有实例中为您汇总。

（4）同一个地方查看日志。我们通过从所有 Web 和 AppFabric 容器实例中收集和集中所有故障排除日志（您可以在构建应用程序时选择应用程序的诊断级别），使分布式应用程序的故障排除变得更加容易。

（5）应用程序管理器允许您单击一下即可扩展应用程序。您可以选择要扩展应用程序不同部分的实例数量（由于我们正在支付您的费用，因此 CTP1 中的最大扩展数量受到限制！）。瞧 — 应用程序会自动且弹性地扩展，无需任何停机时间！

## AWS AppFabric

AWS AppFabric 快速连接整个组织的 SaaS 应用程序。然后，IT 和安全团队可以使用标准架构轻松管理和保护应用程序，员工可以使用生成式 AI 更快地完成日常任务。使用 AppFabric 将 SaaS 生产力和安全应用程序相互连接，并自动标准化应用程序数据，以便管理员设置通用策略。员工可以使用支持 AppFabric 的应用程序快速获得答案、自动化任务管理并生成见解。

AWS AppFabric 快速连接整个组织内的软件即服务 (SaaS) 应用程序。

只需在AWS管理控制台中单击几下，信息技术(IT)和安全团队就可以使用AppFabric添加新功能，使其现有的SaaS应用程序和生产力套件更好地协同工作。

## TKE AppFabric

TKE AppFabric应用管理平台：应用管理的稳定底座与灵活引擎，帮助用户提升云原生应用稳定性和操作效率的全新产品。

为什么做这个产品？

- 充分利用每个集群的资源
- 多集群的学习和管理成本很高
- 多集群管理难度大

多集群管理工具：迫切需要多集群管理工具

怎么样解决集群层面的容灾问题和拓扑问题，又能提升使用效率。

我们的思路是提供一个面向可用区和应用部署和管理业务应用的场景，在这种模式下，管理的是直接业务应用，而不是耦合的K8S资源。

第二，我的部署直接面向需要的位置部署，不需要关注有多少集群，每个集群在每个位置到底有多少资源。

首先，它是面向可用区部署的，意味着我们的部署更符合用户的使用习惯，我要求业务在多个可用区以什么样的形式容灾，不需要关心每个可用区有哪些集群，完全用户的使用需求。

并且用户不会再被集群强绑定，意味着集群的维护可以做到用户无感，集群升级或者下线的时候，可以通过轮换的形式，把老的集群摘掉，这时候上层的应用只需要做一次调度，而不需要再换集群重新部署。

另外，集群的池子可以更松散的管理，资源利用率可以做得比以前更高。现在变成了应用编排，意味着用户只需要描述，我的应用要长成什么样子，怎么样暴露我的服务和扩缩容，用什么样的配置，只需要关注我的应用该是什么样子就可以了，以及描述我的应用怎么样部署，部署到哪里，占多少个可用区，以怎样的比例，一旦有问题怎么样变化，面向实际的需求管理自己的应用就可以了。

整个TKE AppFabric用一句话描述，就是向上服务好应用向下管理好集群，所以多集群管理能力也是可以独立使用的。

对下层：在多集群管理方面，除了提供行业资源的差异化分发和资源的统一分发，相关的能力之外，也会提供集群的分组管理和集群的统一特征管理和插件的标准化安装，这一部分可以独立使用，对不需要应用的用户可以。

对上层：应用高可用的能力，除了应用生命周期的管理，以及应用视角管理效率的提升，也会把内外部的最佳实践变成产品功能，交付给用户，让用户在功能层面直接提升应用稳定性。另外，我们也有巡检和制御的能力，帮助用户及时发现现在的应用有没有异常，以及异常发生了以后有没有自动化的手段能够自动从故障里恢复出来。

目前这个产品在腾讯内部打磨，所有腾讯内部资源上云的业务，比如QQ、腾讯会议、音视频的业务都布置在上面。Q3之前重点在内部，把这个产品做进一步的打磨，Q4的时候会邀请外部一部分用户参与试用，并且把里面的功能做得更标准化一点明年Q1的时候会正式对外提供服务，所以到时候希望有机会和大家一起合作。

## 内容

多集群的缺点：开发者需要直接面对集群，自己实现集群之间的容灾、路由这些问题。如果底层硬件发生调整，应用也要跟着调整，非常被动。

多集群工具的目标：（1）简化操作过程，声明式地创建应用，平台自动分配资源。（2）应用不再绑定特定的硬件资源。平台管理人员可以自行调整底层资源，不影响上层应用。
