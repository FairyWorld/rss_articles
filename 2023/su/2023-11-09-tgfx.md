## [本周软件] TGFX：强大易用的 2D 图形库

大家有没有想过，计算机（包括手机）软件的图形界面，那些漂亮的组件，是怎么做出来的？

要知道，计算机本质上只是一个计算引擎，它只会计算。**你想要图形界面，必须调用专门的图形库**，才能获得图形能力。

图形库（包括组件库）一般由操作系统提供，但是如果软件跨系统，或者要求特殊效果，就必须用外部图形库。目前最流行的通用 2D 图形库是谷歌的 Skia，它是开源的，Chrome 浏览器、Android 系统、谷歌地图都用它。

今天，我向大家介绍**一款国产的开源 2D 图形库，可以作为 Skia 的替代品，它就是来自腾讯的 [TGFX](https://github.com/Tencent/tgfx)**。如果你的软件需要底层图形引擎，可以考虑它。

![](https://cdn.beekka.com/blogimg/asset/202311/bg2023111108.webp)

TGFX 起源于腾讯的[动效解决方案 PAG](https://pag.art/)。当时，腾讯内部很多项目（比如游戏、直播礼物、营销活动），都有很强的动画效果需求，而且要求跨平台，所以就有了 PAG 这个工具。

![](https://cdn.beekka.com/blogimg/asset/202311/bg2023111109.webp)

PAG 的核心就是图形库，最早用的是 Skia，但后来发现两个问题：首先，Skia 有历史包袱，打包体积大，性能也比较保守；其次，中国开发者看重的一些问题，开发团队往往不能（或不愿）跟进。

最终，**PAG 团队下定决心，换掉 Skia，开发自己的图形库 TGFX。**

这件事的难度不小，要用 C++ 开发，兼容各种操作系统的图形接口（目前主要是 OpenGL），做出各种各样的图形，还要保证性能和渲染效果。他们2021年开始做，直到今年才小有所成。TGFX 有几个鲜明特点。

> （1）充分利用现代 GPU 的计算能力，保证性能。
> 
> （2）提供全面的图形能力：各种图片、矢量和文本的 2D 绘制全部支持。
> 
> （3）做到 Skia 的轻量化平替，打包体积仅 400KB，实现了 2MB 的 Skia 的绝大部分功能。
> 
> （4）使用成本低。API 与 Skia 基本相同，并且进行了简化和整合。

PAG 4.0 把图形引擎从 Skia 改成 TGFX 后，包体积降低65%，矢量渲染性能提升 60%。

![](https://cdn.beekka.com/blogimg/asset/202311/bg2023111110.webp)

截止2023年7月，借助 PAG 项目，TGFX 已经运行在**1000+的国内头部业务**，其中不仅有腾讯的微信、手机 QQ、王者荣耀，也有小红书，知乎，BiliBili 等外部项目。稳定性经过了10亿+用户设备的验证，性能表现也不凡，比如为腾讯文档带来了50%的内存降低。

![](https://cdn.beekka.com/blogimg/asset/202311/bg2023111112.webp)

TGFX 以前是 PAG 项目的一部分，最近变成了一个单独的开源项目，放在 [GitHub 上面](https://github.com/Tencent/tgfx)，欢迎大家试用，详细介绍请参考[官方文档](https://docs.qq.com/doc/DREh2bnFGR2RKc3BV)。