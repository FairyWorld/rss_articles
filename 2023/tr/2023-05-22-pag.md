
---

APP里会动的加载动画UI，还是直播间里华丽的礼物，都需要经历动效上线的过程。

设计、制作、调试，跨平台的问题

音视频产品中的动效素材需求是源源不断的，例如贴纸花字，转场特效，照片和视频模板等，并且对它们的产量，上线速度，以及视觉效果都有比较高的要求。但在传统工作流中的交付成本却非常高，需要通过代码来手动还原设计师预设的动效内容。

为了降低或消除动画相关的研发成本，腾讯内部历时 5 年研发了一套 PAG 动画工作流的解决方案，能够一键将 AE 动画内容导出并应用到几乎所有的主流平台。

腾讯研发了一款动画开发“神器”

- 跨平台
- 功能强大
- 开发成本低：简单场景下，不需要程序员，设计师直接就能做出产品上线。
- 学习成本也是很低的

文件小：关键是整个动效文件体积非常小，仅 2 KB左右。复杂的动画可以做得很小。

打包出来是二进制文件，但是它有一个 PAG Viewer 的工具，可以修改里面图片和文字，还可以调试性能。

这样一个投入了无数心血、用在腾讯所有重要业务线的产品，已经开源了。2500+ 星

PAG：Portable Animated Graphics

GitHub：https://github.com/tencent/libpag

官网：https://pag.io/
https://pag.art/

- Lottie 矢量动画
- SVGA 位图东湖
 
PAG 诞生于2016年，最初的原因是为了解决更为复杂的视频编辑场景下动画渲染问题，同时又完美覆盖了UI动画和直播场景。

PAG 流程

- 由AE生成对应动画
- 通过AE插件，完成动画导出部分
- 预览图片素材
- 导出对应文件
- 运营配置后，端上渲染

PAG 优势

- 全AE特性支持：目前支持Lottie在移动端几乎所有的功能，并且额外在文本，遮罩，滤镜方面比Lottie支持更加全面。比如一些内置的特效。
- 支持图层编辑
- 与视频渲染无缝整合
- 支持服务端渲染
- 文件更小：PAG是二进制文件格式，采用了动态比特位编码技术，让相同动画导出的文件大小平均只有 Lottie 的一半左右(都经过zip压缩后对比)。
- 解码更快：PAG由于采用二进制格式，不存在JSON的字符串解析，解码耗时平均只有Lottie文件的7.6%，同时二进制文件格式也更容易做到单文件集成图片，音频，视频等任意资源，所以它的解码速度比Lottie快得很多。
- PAGViewer 面板可以定性的评估PAG素材的性能，
- 全平台支持：以支持到Android、iOS、web、mac OS、windows、Linux，涵盖到所有平台。

配套工具 PAG Viewer

PAG：显著提升了动画设计到上线的效率，解决了行业在动画制作这块的大量痛点问题。目前接入PAG的产品，比如QQ，微信，王者荣耀，QQ音乐等。

PAG 方案目前已经接入了腾讯系 600 余款应用，包括微信，王者荣耀，腾讯视频，QQ音乐等产品，稳定性经过了海量用户的持续验证。

微信视频号的直播就在采用 PAG 方案实现所有的礼物动效

五个应用场景

- 直播礼物
- UI 动画
- 贴纸花字
- 视频模板
- 游戏战报。

