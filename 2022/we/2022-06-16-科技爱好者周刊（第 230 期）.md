## 科技爱好者周刊（第 230 期）

## 文摘


1、[谷歌数据工程师不优化 SQL](https://web.archive.org/web/20220128144246/https://scribe.rip/m/global-identity?redirectUrl=https%253A%252F%252Fblog.devgenius.io%252Flearn-from-googles-data-engineers-don-t-optimize-your-sql-43f0da30701)

我是一个谷歌的外部供应商。在合作过程中，我看到的一些世界上最聪明的数据工程师编写的 SQL 语句效率很低。

这些语句每 10 分钟对大量表生成一个快照，每年创建数 TB 的数据。谷歌为什么不优化这些语句呢？

发生这种情况有三个重要原因。

首先，很多现代数据库具有实时优化，会自己优化 SQL 语句，不需要在这上面投入人力。

其次，根据公开数据，2022年数据工程师的平均年薪为11.25万美元，谷歌工程师的收入显然更高。因此，公司认为，数据工程师的时间最好花在创造业务价值上，而不是浪费时间优化 SQL 查询，这种事情应该留给数据引擎的开发人员和云计算。

第三，存储成本几乎是免费的，而且每天都在变得更便宜。现在谷歌 GCP 平台上每年存储 1TB 数据的成本约为 20 美元。如果每15分钟对一个包含大约 300 万条记录的小表生成快照，那么每年会生成大约 1TB 的数据。

一个美国数据工程师的时薪平均每小时大约54美元，如果他在优化查询、编写合并语句、创建单独的管道、提交代码、对其进行审查、长期维护上花费超过一个小时的时间，就大致相当于数据存储两年的成本。我自己的估计是，他会在这些事情上花费接近8小时，那就大约是16年的存储成本。

由于存储成本如此之低，而且越来越低，数据工程师的时间用于快速行动和创造业务价值，远比浪费在编写精巧的 SQL 语句上更有价值。
