## 如何防止帐号被黑

上周发生了一起安全事件，两家美国互联网公司的后台被攻击了，而且 Twilio 公司被攻破了。

它们事后披露了一些细节，值得谈一下，顺便聊聊怎么才能保护帐号安全。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081116.webp)

首先，大家要有一个认识：**密码是不安全的，一定要启用双因素认证。**

了解互联网安全的朋友，应该知道都知道答案：大部分的用户密码都已经泄漏了。地下的黑产出售很全的数据库，一查邮件地址或手机密码，你的密码就出来了。

中国的很多互联网公司，密码保护非常松懈，还有内部人员倒卖用户信息，就更无法抱有信心了。哪怕设置了很复杂的密码，或者使用随机密码，也可能已经泄漏了。



这种情况下，“双因素认证”（two factor authentication，简写为 2FA）就成了必不可少的安全措施。

所谓“双因素认证”，就是除了密码以外，再多一道额外的认证，比如短信接收一次性验证码。这样的话，就证明了你确实拥有这个手机号码，安全系数就高了很多。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081117.webp)

今天要谈的重点就是，**双因素认证也不是绝对安全的**。

但是，双因素认证不等于绝对安全，也会被破解。真实的案例就是，犯罪分子用假身份证办了同一个号码，接收到了验证码。

现在，有些服务采用身份证照片与人脸比对，作为第二个认证因素，这其实[很不安全](https://finance.sina.com.cn/stock/hyyj/2022-07-18/doc-imizmscv2234144.shtml)，更让人担心。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081119.webp)

一般来说，公认较安全的第二个认证因素，是 TOTP 时间码。客户设备每30秒生成一个跟服务器同步的6位号码，可以通过 Google Authenticator 或 Authy 这样的 App 来获取。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081118.webp)

上周的安全事件就是 TOTP 时间码受到了攻击，并且被攻破了。下面就来说说，这是怎么发生的，漏洞在哪里。

上周，[Twilio](https://www.twilio.com/blog/august-2022-social-engineering-attack) 和 [Cloudflare](https://blog.cloudflare.com/2022-07-sms-phishing-attacks/) 的很多员工都收到了一条手机短信。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081204.webp)

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081205.webp)

短信就是说，公司做了一些调整，请你点击链接，到后台去看一下。

这是攻击者发的。获得员工的手机号码在美国不是难事，LinkedIn 网站上往往可以查到。

短信给出了伪装的域名，在公司名称后面加上`-sso`或`-okta`，有些警惕性不高的员工就会点击。再加上，攻击者选在深夜或假日发送短信，人们往往会发松警惕。

点击链接以后，你会进入一个伪装的网站，跟真正的登陆页一模一样。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081206.webp)

只要你在这个网页填了密码，攻击者就知道了，你的密码就泄漏了。

但是，这两家公司都开通了“双因素认证”，光有密码还进不去后台。假网站这时会把你引导到一个 TOTP 时间码的页面。

进入了这一步，员工信以为真，一旦输入时间码，攻击者就会拿到这个码，立刻同步输入公司的登录页，从而进入真正的后台。Twilio 公司的系统就是这样被攻破了。

可以这样说，采用这种攻击，大部分公司的双因素认证都会被攻破。

但是，Cloudflare 没有攻破，原因是他们没有采用时间码，而是采用了物理密钥。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081207.webp)

除了输入密码，还必须把物理密钥插入机器，才能登陆后台。所以，上面这种网络钓鱼无法攻破。

这件事告诉我们几点。

（1）“双因素认证”并不安全。

（2）密码 + 物理密钥，才是目前最安全的认证方法。

支持物理密钥的网站，有Fastmail，Google，Dropbox，GitHub等。将来 Web Authencation API 的普及，将来会越来越多。还是应该准备一把物理密钥。

但是，这种方法成本比较高，物理密钥现在一把都要几百元人民币。

对于大多数人来说，没有太好的方法，能做到的就是提高警惕，坚持使用双因素认证，不点击陌生域名，不轻易输入密码。

https://clarkzjw.medium.com/yubikey-4%E5%85%A5%E6%89%8B-51ec9f8c92eb

![](https://miro.medium.com/max/782/0*YC7NflnRVE0Mejiu)
