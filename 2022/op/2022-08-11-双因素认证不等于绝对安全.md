## 双因素认证 ≠ 绝对安全

本周谈谈安全问题，因为上周发生了一个事件，两家美国互联网大厂的“双因素认证”被攻击了。

首先，问大家一个问题： **你觉得，你的密码安全吗？**

了解互联网安全的朋友，应该知道都知道答案：大部分的用户密码都已经泄漏了。地下的黑产出售很全的数据库，一查邮件地址或手机密码，你的密码就出来了。

中国的很多互联网公司，密码保护非常松懈，还有内部人员倒卖用户信息，就更无法抱有信心了。哪怕设置了很复杂的密码，或者使用随机密码，也可能已经泄漏了。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081116.webp)

这种情况下，“双因素认证”（two factor authentication，简写为 2FA）就成了必不可少的安全措施。

所谓“双因素认证”，就是除了密码以外，再多一道额外的认证，比如短信接收一次性验证码。这样的话，就证明了你确实拥有这个手机号码，安全系数就高了很多。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081117.webp)

但是，双因素认证不等于绝对安全，也会被破解。真实的案例就是，犯罪分子用假身份证办了同一个号码，接收到了验证码。

现在，有些服务采用身份证照片与人脸比对，作为第二个认证因素，这其实[很不安全](https://finance.sina.com.cn/stock/hyyj/2022-07-18/doc-imizmscv2234144.shtml)，更让人担心。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081119.webp)

一般来说，公认较安全的第二个认证因素，是 TOTP 时间码。客户设备每30秒生成一个跟服务器同步的6位号码，可以通过 Google Authenticator 或 Authy 这样的 App 来获取。

![](https://cdn.beekka.com/blogimg/asset/202208/bg2022081118.webp)

上周的安全事件就是 TOTP 时间码受到了攻击，并且被攻破了。下面就来说说，这是怎么发生的，漏洞在哪里。